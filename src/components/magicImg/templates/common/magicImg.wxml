
<view class="sectionTitle" wx:if="{{ magicImgData.title }}">{{ magicImgData.title }}</view>

<!-- 一行排布的情况 -->
<view class="rowImgWrap" wx:if="{{ magicImgData.defineType === 'oneLine' }}" style="height: {{ (tplStyle === 'default' || tplStyle === 'vip_tpl_four' || tplStyle === 'vip_tpl_five' || tplStyle === 'vip_tpl_six') ? magicImgData.height : 690 * (magicImgData.height / 750 )}}rpx">
    <block wx:for="{{magicImgData.eachNum}}" wx:key="item">
        <template is="rowImgItem" data="{{magicImgData, index, userInfo, tabbarPages, config}}"></template>
    </block>
</view>

<!-- 多行排布的情况 -->
<view class="rowImgWrap" wx:if="{{ magicImgData.layout === '3-2' }}" style="height: {{ (tplStyle === 'default' || tplStyle === 'vip_tpl_four' || tplStyle === 'vip_tpl_five' || tplStyle === 'vip_tpl_six') ? magicImgData.height : 690 * (magicImgData.height / 750 )}}rpx">
    <template is="rowImgItem" data="{{magicImgData, index: 0, userInfo, tabbarPages}}"></template>
    <view class="rowImgItem columnImgWrap {{ magicImgData.spacing ? 'rowImgItemMargin' : '' }}">
        <template is="columnImgItem" data="{{magicImgData, index: 1, userInfo, tabbarPages, config}}"></template>
        <template is="columnImgItem" data="{{magicImgData, index: 2, userInfo, tabbarPages, config}}"></template>
    </view>
</view>

<view class="rowImgWrap" wx:if="{{ magicImgData.layout === '3-3' }}" style="height: {{ (tplStyle === 'default' || tplStyle === 'vip_tpl_four' || tplStyle === 'vip_tpl_five' || tplStyle === 'vip_tpl_six') ? magicImgData.height : 690 * (magicImgData.height / 750 )}}rpx">
    <view class="rowImgItem columnImgWrap {{ magicImgData.spacing ? 'rowImgItemMargin' : '' }}">
        <template is="columnImgItem" data="{{magicImgData, index: 0, userInfo, tabbarPages, config}}"></template>
        <template is="columnImgItem" data="{{magicImgData, index: 1, userInfo, tabbarPages, config}}"></template>
    </view>
    <template is="rowImgItem" data="{{magicImgData, index: 2, userInfo, tabbarPages, config}}"></template>
</view>

<view class="rowImgWrap" wx:if="{{ magicImgData.layout === '4-2' }}" style="height: {{ (tplStyle === 'default' || tplStyle === 'vip_tpl_four' || tplStyle === 'vip_tpl_five' || tplStyle === 'vip_tpl_six') ? magicImgData.height : 690 * (magicImgData.height / 750 )}}rpx">
    <view class="rowImgItem columnImgWrap {{ magicImgData.spacing ? 'rowImgItemMargin' : '' }}">
        <template is="columnImgItem" data="{{magicImgData, index: 0, userInfo, tabbarPages, config}}"></template>
        <template is="columnImgItem" data="{{magicImgData, index: 1, userInfo, tabbarPages, config}}"></template>
    </view>
    <view class="rowImgItem columnImgWrap {{ magicImgData.spacing ? 'rowImgItemMargin' : '' }}">
        <template is="columnImgItem" data="{{magicImgData, index: 2, userInfo, tabbarPages, config}}"></template>
        <template is="columnImgItem" data="{{magicImgData, index: 3, userInfo, tabbarPages, config}}"></template>
    </view>
</view>
<form report-submit='true' bind:submit='test'>
  <button id="formId" form-type="submit"></button>
</form>

    <!-- 纵向排布的模板 -->
    <template name="columnImgItem">
        <button
            wx:if="{{ magicImgData.images[index].type === 'contact'}}"
            bindtap="{{ config.contact && config.contact.type !== 'weapp' || magicImgData.images[index].tips ? 'onModal' : ''}}"
            open-type="{{ config.contact && config.contact.type !== 'weapp' || magicImgData.images[index].tips ? '' : 'contact'}}"
            data-tips="{{ magicImgData.images[index].tips }}"
            session-from='{"nickName":"{{userInfo.nickname}}", "avatarUrl":"{{userInfo.avatarurl}}"}'
            class="columnImgItem {{ magicImgData.spacing ? 'columnImgItemMargin' : '' }} {{  magicImgData.images[index].image ? '' : 'imgbg' }}"
            style="background-image: url({{  magicImgData.images[index].image }})"
        ></button>

        <navigator
            wx:elif="{{ magicImgData.images[index].type === 'web_view' ||  magicImgData.images[index].type === 'mini_program' }}"
            class="columnImgItem {{ magicImgData.spacing ? 'columnImgItemMargin' : '' }} {{  magicImgData.images[index].image ? '' : 'imgbg' }}"
            url="{{ magicImgData.images[index].type === 'web_view' ? '/pages/webPages/webPages?src=' + magicImgData.images[index].src : magicImgData.images[index].path }}"
            style="background-image: url({{ magicImgData.images[index].image }})"
            target="{{ magicImgData.images[index].type === 'mini_program' ? 'miniProgram' : '' }}"
            app-id="{{ magicImgData.images[index].appid }}"
            path="{{ magicImgData.images[index].path }}"
            hover-class="none"
        ></navigator>

        <view
          wx:elif="{{ magicImgData.images[index].type === 'tel' }}"
          class="columnImgItem {{ magicImgData.spacing ? 'columnImgItemMargin' : '' }} {{  magicImgData.images[index].image ? '' : 'imgbg' }}"
          style="background-image: url({{ magicImgData.images[index].image }})"
          bindtap="call"
          data-phone="{{ magicImgData.images[index].phone }}"
        ></view>

        <navigator
            wx:else
            class="columnImgItem {{ magicImgData.spacing ? 'columnImgItemMargin' : '' }} {{  magicImgData.images[index].image ? '' : 'imgbg' }}"
            style="background-image: url({{ magicImgData.images[index].image }})"
            url="{{ magicImgData.images[index].path }}"
            hover-class="none"
            open-type="{{ tabbarPages[magicImgData.images[index].page_key] ? 'switchTab' : 'navigate' }}"
        ></navigator>
    </template>

    <!-- 横向排布的模板 -->
    <template name="rowImgItem">
        <button
            wx:if="{{ magicImgData.images[index].type === 'contact' }}"
            bindtap="{{ config.contact && config.contact.type !== 'weapp' || magicImgData.images[index].tips ? 'onModal' : ''}}"
            open-type="{{ config.contact && config.contact.type !== 'weapp' || magicImgData.images[index].tips ? '' : 'contact'}}"
            data-tips="{{ magicImgData.images[index].tips }}"
            session-from='{"nickName":"{{userInfo.nickname}}", "avatarUrl":"{{userInfo.avatarurl}}"}'
            class="rowImgItem {{ magicImgData.spacing ? 'rowImgItemMargin' : '' }} {{  magicImgData.images[index].image ? '' : 'imgbg' }}"
            style="background-image: url({{ magicImgData.images[index].image }})"
        ></button>


        <navigator
            wx:elif="{{ magicImgData.images[index].type === 'web_view' ||  magicImgData.images[index].type === 'mini_program' }}"
            class="rowImgItem {{ magicImgData.spacing ? 'rowImgItemMargin' : '' }} {{  magicImgData.images[index].image ? '' : 'imgbg' }}"
            url="{{   magicImgData.images[index].type === 'web_view' ? '/pages/webPages/webPages?src=' + magicImgData.images[index].src : magicImgData.images[index].path }}"
            style="background-image: url({{  magicImgData.images[index].image }}); flex: {{ magicImgData.flex ? magicImgData.flex[index] : 1 }}"
            target="{{  magicImgData.images[index].type === 'mini_program' ? 'miniProgram' : '' }}"
            app-id="{{  magicImgData.images[index].appid }}"
            path="{{  magicImgData.images[index].path }}"
            hover-class="none"
            bindfail="miniFail"
        >
        </navigator>

        <!-- 视频 只有一行时才能用-->
        <video
            wx:elif="{{ magicImgData.images[index].type === 'video' }}"
            class="rowImgItem {{ magicImgData.spacing ? 'rowImgItemMargin' : '' }} {{  magicImgData.images[index].image ? '' : 'imgbg' }}"
            src="{{ magicImgData.images[index].video }}"
            style="flex: {{ magicImgData.flex ? magicImgData.flex[index] : 1 }}"
            poster="{{  magicImgData.images[index].image }}"
            controls
        ></video>

        <!-- 拨打电话 -->
        <view
          wx:elif="{{ magicImgData.images[index].type === 'tel' }}"
          class="rowImgItem {{ magicImgData.spacing ? 'rowImgItemMargin' : '' }} {{  magicImgData.images[index].image ? '' : 'imgbg' }}"
          style="background-image: url({{  magicImgData.images[index].image }}); flex: {{ magicImgData.flex ? magicImgData.flex[index] : 1 }}"
          bindtap="call"
          data-phone="{{ magicImgData.images[index].phone }}"
        ></view>

        <navigator
         wx:else
         class="rowImgItem {{ magicImgData.spacing ? 'rowImgItemMargin' : '' }} {{  magicImgData.images[index].image ? '' : 'imgbg' }}"
         style="background-image: url({{  magicImgData.images[index].image }}); flex: {{ magicImgData.flex ? magicImgData.flex[index] : 1 }}"
         url="{{ magicImgData.images[index].path }}"
         hover-class="none"
         open-type="{{ tabbarPages[magicImgData.images[index].page_key] ? 'switchTab' : 'navigate' }}"
        ></navigator>

    </template>