<!-- 我的资产 -->
<view class="container">
    <view class="page-loading" wx:if="{{ isLoading }}">
        <van-loading />
    </view>
    <block wx:else>
        <view class="header" style="background-color: {{ themeColor.primaryColor }}">
            <view class="header-top">
                <button class="head-button" style="background-color: {{ themeColor.primaryColor  }}" 
                bindgetuserinfo="bindGetUserInfo" 
                open-type="getUserInfo">
                    <image src="{{ user.avatarurl ? user.avatarurl : '/icons/unlogin.png' }}" mode="aspectFit" class="avatar"></image>
                    <view class="head-text">
                        <view class="head-user">{{ !user.nickname ? '点击头像登录' : user.nickname }}</view>
                        <view class="head-level">{{ user.membership.level_name ? user.membership.level_name : '普通用户'}}</view>
                    </view>
                </button>
                <navigator class="welfare" url="/pages/coinDetail/coinDetail">
                    <view class="number">{{ wallet && wallet.coins || 0 }}</view>
                    <view class="title">{{ config.coin_name || '金彩' }}</view>
                </navigator>
                <navigator class="welfare" url="/pages/myCoupons/myCoupons">
                    <view class="number">{{ coupons.available.length || 0 }}</view>
                    <view class="title">优惠券</view>
                </navigator>
            </view>
        </view>
        <view class="body">
            <!-- 回购账户 -->
            <view class="account" wx:if="{{ config.repo_enable }}">
                <view class="account-title">
                    <text class="title">回购账户</text>
                </view>
                <view class="account-body">
                    <view class="account-value">
                        <view class="value-item">
                            <view class="item-num">{{ wallet && wallet.repo_balance || 0 }}</view>
                            <view class="item-tip">钱包余额（元）</view>
                        </view>
                        <view class="value-item">
                            <view class="item-num">{{ wallet && wallet.deposit_balance || 0 }}</view>
                            <view class="item-tip">存金总额（克）</view>
                        </view>
                    </view>
                    <view class="account-more" bind:tap="go" data-url="/pages-cuilv/depositIndex/depositIndex">详情></view>
                </view>
            </view>
            <!-- 储值账户 -->
            <view class="account" wx:if="{{ config.store_card_enable }}">
                <view class="account-title">
                    <text class="title">储值账户</text>
                </view>
                <view class="account-body">
                    <view class="account-value">
                        <view class="value-item">
                            <view class="item-num">{{ wallet && wallet.cash_balance || 0 }}</view>
                            <view class="item-tip">储值余额（元）</view>
                        </view>
                        <view class="value-item">
                            <view class="item-num">{{ wallet && wallet.gift_balance || 0 }}</view>
                            <view class="item-tip">赠送余额（元）</view>
                        </view>
                    </view>
                    <view class="account-more" bind:tap="go" data-url="/pages/membership/members/members">详情></view>
                </view>
            </view>
            <!-- 分享家账户 -->
            <view class="account" wx:if="{{ config.affiliate_enable && user.is_affiliate_member }}">
                <view class="account-title">
                    <text class="title">分享家账户</text>
                </view>
                <view class="account-body">
                    <view class="account-value">
                        <view class="value-item">
                            <view class="item-num">{{ wallet && wallet.affiliate_income_total || 0 }}</view>
                            <view class="item-tip">累计（元）</view>
                        </view>
                        <view class="value-item">
                            <view class="item-num">{{ wallet && wallet.affiliate_income_pending || 0 }}</view>
                            <view class="item-tip">未结算（元）</view>
                        </view>
                        <view class="value-item">
                            <view class="item-num">{{ wallet && wallet.affiliate_balance || 0 }}</view>
                            <view class="item-tip">可提现（元）</view>
                        </view>
                    </view>
                    <view class="account-more" bind:tap="go" data-url="/pages/affiliate/affiliateCenter/affiliateCenter">详情></view>
                </view>
            </view>
        </view>
    </block>
</view>
