<view class="page" style="--primaryColor:  #FE4F06">
  <view class="shop-swiper">
    <swiper autoplay="{{autoplay}}" class="swiper" bindchange="currentIndex" indicator-dots="{{true}}" indicator-active-color="{{ '#FE4F06'}}" indicator-color="#fff">
      <swiper-item class="swiper-box" wx:for="{{ product.images }}" wx:key="id" wx:for-item="image">
        <image class="swiper-img" src="{{ image.large }}" mode="aspectFill" data-index="{{index}}" bindtap="previewImg" />
      </swiper-item>
    </swiper>
    <!-- <view class="swiper-pageNum">
      <text lines="1" class="number">1/6</text>
    </view> -->
  </view>
  <!-- <view class="shop-time">
    <image class="time-img" src="../../icons/mvp/time-bg.png" />
    <view class="time">
      <view class="time-text">
        <text lines="1">您的手气也太好了吧</text>
        <view class="order">
          现在下单
          <text class="order-box">
            立减
            <text class="order-number">10</text>
            元
          </text>
        </view>
      </view>
      <view class="countdown">
        <view style="margin-bottom: 12rpx;">优惠结束倒计时</view>
        <van-count-down use-slot class="countdown-time" time="{{ time }}" bind:change="countdownChange">
          <text class="item">{{ timeData.hours }}</text>
          :
          <text class="item">{{ timeData.minutes }}</text>
          :
          <text class="item" style="margin-right: 0;">{{ timeData.seconds }}</text>
        </van-count-down>
      </view>
    </view>
  </view> -->
  <view class="shop-detail">
    <view class="shop-price">
      <view class="coupon">
        券后￥
        <text lines="1" class="coupon-price">{{ product.price }}</text>
        起
      </view>
      <text lines="1" class="original-price">原价￥{{product.price }}起</text>
    </view>
    <view lines="1" class="shop-desc">{{  product.title }}</view>
    <text lines="1" class="desc-size">{{  product.excerpt }}</text>
    <view class="line"></view>
    <view class="free-shipping">
      <text lines="1" class="shipping-text">快递：包邮</text>
      <text lines="1" class="shipping-text">销售：{{ product.sales }}</text>
      <text lines="1" class="shipping-text">库存：{{ product.stock }}</text>
    </view>
  </view>
  <!-- <view class="shop-discount">
    <view class="shop-serve">
      <view lines="1" class="serve-title">服务</view>
      <view lines="2" class="serve-content">
        <view class="" selectable="false" space="false" decode="false">
          ·全场满800减60元，满1000减80元，满2000减200元；
        </view>
        <view class="" selectable="false" space="false" decode="false">·满289元享8折</view>
      </view>
    </view>
  </view> -->
  <!-- 服务说明 -->
  <view wx:if="{{ product.service_instructions && product.service_instructions.length }}" class="service">
    <view class="text">服务</view>
    <view class="desc">
      <view class="service-item" wx:for="{{ product.service_instructions }}" wx:key="item">
        • {{ item }}
      </view>
    </view>
  </view>
  <view class="shop-text">
    <view class="text-line"></view>
    <text lines="1" class="content">商品详情</text>
    <view class="text-line"></view>
  </view>
  <view class="shop-detail-content">
    <image class="shop-detail-image" src="{{ item }}" mode="widthFix" lazy-load="false" binderror="" bindload="" wx:for="{{  product.content }}" />
  </view>
  <view class="shop-button" bindtap="handleClick">
    <button size="default" class="def-btn">点我下单</button>
  </view>
  <!-- 优惠卷弹窗 -->
  <!-- <van-overlay show="{{ showOverlay }}">
    <view class="overlay">
      <image class="overlay-img" src="" />
      <van-icon class="overlay-close" name="close" size="64rpx" color="#ffffff" catch:tap="onClickHide" />
    </view>
  </van-overlay> -->
</view>
<!-- SKU -->
<skuModal isShowSkuModal="{{  isShowSkuModal }}" product="{{ product }}" themeColor="{{ themeColor }}" position="bottom" actions="{{ actions }}" quantity="{{ product.least || 1 }}" isCrowd="{{ isCrowd }}" isGrouponBuy="{{ isGrouponBuy }}" isBargainBuy="{{isBargainBuy}}" config="{{ config }}" isIphoneX="{{ isIphoneX }}" bind:onSkuConfirm="onSkuConfirm" bind:shipping-change="getShippingType" />
<!-- 文字弹窗 -->
<van-dialog
  use-slot
  title=""
  show="{{ textModal }}"
  show-cancel-button
  confirm-button-open-type="getUserInfo"
  cancel-button-color="#606266"
  confirm-button-color="#ffffff"
  class="text-modal"
>
  <view class="modal">您有一张<text class="price">5元</text>的商家优惠券还未使用，点击确定立即使用</view>
</van-dialog>

<!-- 倒计时弹窗 -->
<van-dialog
  use-slot
  title=""
  show="{{ countdownModal }}"
  class="countdown-modal"
  show-confirm-button="{{false}}"
  close-on-click-overlay
>
<view class="modal-content">
  <image class="modal-img" src='../../icons/mvp/modal-bg.png'/>
  <view class="text">限时立减<text class="num">10</text>元</view>
  <view class="modal-countdown">
    <van-count-down wx:if="{{showCountDown}}" use-slot class="countdown-time" time="{{ time }}" bind:change="countdownChange">
         <text class="time-text">剩余</text> 
         <text class="item">{{ timeData.hours }}</text>
          :
          <text class="item">{{ timeData.minutes }}</text>
          :
          <text class="item">{{ timeData.seconds }}</text>
          <text class="time-text">结束</text> 
        </van-count-down>
    <button class="btn {{!showCountDown?'showCountDown':''}}">立即下单</button>
  </view>
</view>
</van-dialog>

<van-dialog
  use-slot
  title=""
  show="{{ true }}"
  custom-class="def-img"
  show-confirm-button="{{false}}"
  close-on-click-overlay
  customStyle="width: 526rpx; border:none"
>
<view class="modal-img">
  <image class="img-bg" src='../../icons/mvp/def-modal.png'/>
  <view class="price">¥ <text class="num">40</text></view>
  <image class="img-btn" src='../../icons/mvp/def-btn.png'/>
</view>
</van-dialog>