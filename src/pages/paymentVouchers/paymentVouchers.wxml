<van-loading type="spinner" vertical wx:if="{{ isLoading }}" custom-class="loading">加载中...</van-loading>
<view class="container" wx:if="{{ !isLoading && order }}">
	<view class="header">
		<view class="header-top">
			<view>状态：{{ order.statusText }}</view>
			<view class="countTime" wx:if="{{ order.statusCode === 1 }}">
				<view>支付剩余时间：</view>
				<van-count-down time="{{ order.timeLimit }}" bind:finish="onReload"/>
			</view>
		</view>
		<view class="amount">
			<van-cell-group custom-class="exchange-detail-wrap">
				<van-cell
					title="合计"
					custom-class="exchange-detail"
					title-class="exchange-total-title"
					value-class="exchange-total-value"
					value="{{ exchange_info.to_currency_sign || '￥' }} {{ exchange_info.exchange_amount || amount }}"
					border="{{ false }}" />
			</van-cell-group>
		</view>
	</view>

	<view class="center" wx:if="{{ transfers && transfers.length }}">
		<van-tabs active="{{ activeIndex }}" bind:click="onClick" color="{{ themeColor.primaryColor }}">
			<van-tab wx:for="{{ transfers }}" title="{{ item.name }}">
				<view class="centerContent">
					<image src="{{ item.image_url }}" mode="widthFix" class="centerImg" data-image="{{ item.image_url }}" bindtap="previewImage" wx:if="{{ item.image_url }}"/>
					<view class="centerWraper" wx:for="{{ item.fields }}" wx:for-item="itemChild">
						<view class="left">
							<view class="field_name">{{ itemChild.field_name }}</view>
							<view class="content">{{ itemChild.content }}</view>
						</view>
						<view class="cropyBtn" bindtap="setClipboardVp" data-value="{{ itemChild.content }}" wx:if="{{itemChild.reproducible}}" style="background-color: {{ themeColor.primaryColor }}">复制</view>
					</view>
				</view>
			</van-tab>
		</van-tabs>
	</view>

	<view class="bottom" >
		<view class="text">上传付款凭证</view>
		<view class="uploadGroup" hover-class="none" hover-stop-propagation="false">
			<view class="uploadItem addImage" wx:if="{{ !transfer_image && (order.statusCode === 1 || order.statusCode === 1011) }}" bindtap="onUpload">
				<image class="camera" src="/icons/camera.png" mode="aspectFit"></image>
				<view class="text">添加图片</view>
			</view>
			<view class="uploadItem" wx:if="{{ transfer_image }}">
				<image class="imageItem" src="{{ transfer_image }}" mode="aspectFill" data-image="{{ transfer_image }}" bindtap="previewImage" />
				<image src="/icons/delete.png" class="deleteIcon" bindtap="onDeleteImage" mode="aspectFill" wx:if="{{ order.statusCode === 1 || order.statusCode === 1011 }}"/>
			</view>
		</view>
	</view>

	<view class="btn">
		<van-button round type="danger" size="large" color="{{ themeColor.primaryColor }}" disabled="{{ !(transfers && transfers.length) }}" wx:if="{{ order.statusCode === 1 }}" bind:click="onSubmit">我已付款</van-button>
		<van-button round type="danger" size="large" color="{{ themeColor.primaryColor }}" wx:if="{{ order.statusCode === 1011 }}" bind:click="onSubmit">重新提审</van-button>
	</view>
</view>
