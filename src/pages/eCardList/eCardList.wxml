<wxs src="/utils/wxs/utils.wxs" module="WXS" />

<view class="wallet">
    <loading isLoading="{{ isLoading }}" />
    <view class="wallet-content" wx:if="{{ !isLoading }}">
      <!-- 电子卡 -->
      <view class="e-card">
        <van-empty description="无相关电子卡券" wx:if="{{ !eCard.length }}" />
        <view class="e-card-content" wx:else>
          <view class="e-card-item" wx:for="{{ eCard }}" wx:key="index" bind:tap="go" data-url="/pages/electronicCard/electronicCard?id={{ item.ticket_id }}">
            <view class="e-card-detail">
              <view class="card-detail-left">
                <view class="detail-left-item">
                  <text>商品信息：</text>
                  <text>{{ item.post_title || '-' }}</text>
                </view>
                <view class="detail-left-item">
                  <text>剩余次数：</text>
                  <text>{{ item.available_times || 0 }}</text>
                </view>
                <view class="detail-left-item">
                  <text>商品有效期：</text>
                  <text>{{ WXS.formatDate(item.create_time, 'yyyy.MM.dd') + '-' + WXS.formatDate(item.expired_time, 'yyyy.MM.dd') }}</text>
                </view>
              </view>
              <van-image width="100rpx" height="100rpx" src="{{ item.image_url }}" />
            </view>
            <view class="e-card-status">
              <view class="card-status left">点击查看凭证</view>
              <view class="card-status-right">
                <text wx:if="{{ item.status === 1 }}">使用中</text>
                <text wx:elif="{{ item.status === 2 }}">已过期</text>
                <text wx:elif="{{ item.status === 3 }}">已使用</text>
                <text wx:elif="{{ item.status === 4 }}">已冻结</text>
                <text wx:elif="{{ item.status === 5 }}">已作废</text>
                <text wx:else>-</text>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>